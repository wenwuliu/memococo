{% extends "template.html" %}
{% block content %}
<!-- 在 settings.html 中 -->
<form method="POST" class="needs-validation" style="width:60%;margin:auto;align:center" novalidate>
    <h2>Settings</h2>
    <div class="mb-3">
      <label for="model" class="form-label">Use Ollama</label>
      <select class="form-control" id="use_ollama" name="use_ollama" required>
        <option value="True" {% if settings['use_ollama'] == 'True' %}selected{% endif %}>True</option>
        <option value="False" {% if settings['use_ollama'] == 'False' %}selected{% endif %}>False</option>
      </select>
      <div class="invalid-feedback">
        Please select use ollama.
      </div>
    </div>
    <div class="mb-3">
      <label for="model" class="form-label">Model</label>
      <input type="text" class="form-control" id="model" name="model" value="{{ settings['model'] }}" required>
      <div class="invalid-feedback">
        Please enter a model.
      </div>
    </div>
    <div class="mb-3">
      <label for="ocr_tool" class="form-label">OCR Tool</label>
      <select class="form-control" id="ocr_tool" name="ocr_tool" required>
        <option value="trwebocr" {% if settings['ocr_tool'] == 'trwebocr' %}selected{% endif %}>trwebocr</option>
        <option value="rapidocr" {% if settings['ocr_tool'] == 'rapidocr' %}selected{% endif %}>rapidocr</option>
      </select>
      <div class="invalid-feedback">
        Please select an OCR tool.
      </div>
    </div>
    <div class="mb-3">
      <label for="ignored_apps" class="form-label">Ignored Apps</label>
      <input type="text" class="form-control" id="ignored_apps" name="ignored_apps" value="{{ ', '.join(settings['ignored_apps']) }}" required>
      <div class="invalid-feedback">
        Please enter ignored apps.
      </div>
      <small class="form-text text-muted">输入要忽略的应用程序名称，用逗号分隔</small>
    </div>

    <!-- 数据清理功能已移除，以确保数据持久保存 -->

    <button type="submit" class="btn btn-primary">保存设置</button>
  </form>
  <div style="margin-top: 20px;align:center">
  <a href="{{ url_for('unbacked_up_folders') }}" class="btn btn-primary">日志文件夹备份</a>
  </div>
{% endblock %}
